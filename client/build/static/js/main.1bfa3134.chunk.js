(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(55)},35:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),o=a.n(s),c=a(1),l=a(2),i=a(4),u=a(3),m=a(5),h=a(14),p=(a(35),a(7)),g=a(6),f=a.n(g),d=function(e){return r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.b,{to:"/"},"Home"),r.a.createElement(p.b,{to:"/store"},"Main Store"),r.a.createElement(p.b,{to:"/wishlist"},"Wishlist")),e.user?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(p.b,{to:"/user"},"Profile")),r.a.createElement("li",null,r.a.createElement(p.b,{onClick:function(){return function(e){console.log(e),f.a.post("/api/auth/logout").then(function(e){return e.data}).then(function(){e.setUser(null)}).catch(function(e){console.log(e)})}(e)},to:"/logout"},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(p.b,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/signup"},"Signup")))))},E=a(29),v=function(e){var t=e.component,a=e.user,n=e.path,s=e.redirectPath,o=void 0===s?"/":s,c=Object(E.a)(e,["component","user","path","redirectPath"]);return r.a.createElement(h.b,{path:n,render:function(e){return a?r.a.createElement(t,Object.assign({},e,c,{user:a})):r.a.createElement(h.a,{to:o})}})},b=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"shape"},r.a.createElement("h1",null,"Our future is a smart future."),r.a.createElement(p.b,{to:"/login"},"Login"),r.a.createElement(p.b,{to:"/signup"},"Signup")))}}]),t}(r.a.Component),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){f.a.post("/api/store/wishlist",{user:a.props.user,item:a.props.item}).then(function(e){console.log("here"),console.log(e.data),a.props.setUser(e.data)}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("button",{onClick:function(){return e.handleClick()}},"Add to wishlist")}}]),t}(r.a.Component),O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={city:"",temp:"",inventory:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.a.get("https://ipapi.co/json/").then(function(t){e.setState({city:t.data.city}),f.a.get("http://api.openweathermap.org/data/2.5/weather?q=".concat(t.data.city,"&APPID=200ec4f6bebf09606b0090d0fd497aff")).then(function(a){console.log(a.data.main.temp-273.15),e.setState({city:t.data.city,temp:(a.data.main.temp-273.15).toFixed(1)}),console.log(e.state)}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)}),f.a.get("/api/store/personalstore/".concat(this.props.user._id)).then(function(t){e.setState({inventory:t.data}),console.log(e.state)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome from ",this.state.city," where the temperature is ",this.state.temp,"\xb0C"),r.a.createElement("h2",null,"Your recommended collection: "),r.a.createElement("div",{className:"store-container"},this.state.inventory.length?r.a.createElement("div",{className:"item-container"},this.state.inventory.map(function(t){return r.a.createElement("div",{className:"item-card",key:t._id},r.a.createElement("p",null,t.name),r.a.createElement("img",{src:t.image,alt:t.name,onMouseOver:function(e){return e.currentTarget.src="".concat(t.image2)},onMouseOut:function(e){return e.currentTarget.src="".concat(t.image)}}),r.a.createElement("div",{className:"item-content"},r.a.createElement("p",null,t.type),r.a.createElement("span",null,"|"),r.a.createElement(y,{item:t,user:e.props.user,setUser:e.props.setUser})))})):r.a.createElement("div",null,"Loading")))}}]),t}(r.a.Component),C=function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:e.searchChange}))},j=a(16),w=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={male:!1,female:!1,outerwear:!1,shirt:!1,pants:!1,shoes:!1},a.filterChoiceChange=function(e){var t=e.toLowerCase(),n=[];a.setState(Object(j.a)({},t,!a.state[t]),function(){for(var e in a.state){a.state[e]&&n.push(e)}a.props.filterChange(n)})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){return e.filterChoiceChange("Male")}},"Men"),r.a.createElement("li",{onClick:function(){return e.filterChoiceChange("Female")}},"Women")),r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){return e.filterChoiceChange("Outerwear")}},"Outerwear"),r.a.createElement("li",{onClick:function(){return e.filterChoiceChange("Shirt")}},"Shirts"),r.a.createElement("li",{onClick:function(){return e.filterChoiceChange("Pants")}},"Pants"),r.a.createElement("li",{onClick:function(){return e.filterChoiceChange("Shoes")}},"Shoes")))}}]),t}(r.a.Component),S=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={inventory:[],originalInventory:[]},a.searchChange=function(e){console.log(a.state.inventory);var t=a.state.originalInventory.filter(function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())});a.setState({inventory:t})},a.filterChange=function(e){console.log(e);var t=a.state.originalInventory.filter(function(t){return e.includes(t.category.toLowerCase())||e.includes(t.gender.toLowerCase())});console.log(t),t.length||(t=a.state.originalInventory),a.setState({inventory:t})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props),console.log(this.props.user),f.a.get("/api/store").then(function(t){e.setState({inventory:t.data,originalInventory:t.data})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(C,{searchChange:this.searchChange}),r.a.createElement(w,{inventory:this.state.originalInventory,filterChange:this.filterChange}),r.a.createElement("div",{className:"store-container"},this.state.inventory.length?r.a.createElement("div",{className:"item-container"},this.state.inventory.map(function(t){return r.a.createElement("div",{className:"item-card",key:t._id},r.a.createElement("p",null,t.name),r.a.createElement("img",{src:t.image,alt:t.name,onMouseOver:function(e){return e.currentTarget.src="".concat(t.image2)},onMouseOut:function(e){return e.currentTarget.src="".concat(t.image)}}),r.a.createElement("div",{className:"item-content"},r.a.createElement("p",null,t.category),r.a.createElement("span",null,"|"),r.a.createElement(y,{item:t,user:e.props.user,setUser:e.props.setUser})))})):r.a.createElement("div",null,"Loading")))}}]),t}(r.a.Component),k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){console.log("working"),f.a.post("/api/store/wishlistremove",{user:a.props.user,item:a.props.item}).then(function(e){console.log(e.data),console.log("here"),a.props.setUser(e.data)}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("button",{onClick:function(){return e.handleClick()}},"Remove from wishlist")}}]),t}(r.a.Component),U=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.user.wishlist.length?r.a.createElement("div",{className:"store-container"},r.a.createElement("div",{className:"item-container"},this.props.user.wishlist.map(function(t){return r.a.createElement("div",{className:"item-card",key:t._id},r.a.createElement("p",null,t.name),r.a.createElement("img",{src:t.image,alt:t.name,onMouseOver:function(e){return e.currentTarget.src="".concat(t.image2)},onMouseOut:function(e){return e.currentTarget.src="".concat(t.image)}}),r.a.createElement("div",{className:"item-content"},r.a.createElement("p",null,t.type),r.a.createElement("span",null,"|"),r.a.createElement(k,{item:t,user:e.props.user,removedItem:e.removedItem,setUser:e.props.setUser})))}))):r.a.createElement("div",null,"Visit the store to add to your wishlist"))}}]),t}(r.a.Component),M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",message:""},a.handleChange=function(e){a.setState({username:e.target.value})},a.handleClick=function(e){f.a.post("/api/auth/login",{username:a.state.username}).then(function(t){var n=t.data.message;return n?a.setState({message:n}):a.props.history.push("/".concat(e,"login/").concat(a.state.username))}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("label",{htmlFor:"username"},"Enter your username"),r.a.createElement("input",{type:"text",name:"username",onChange:this.handleChange}),r.a.createElement("button",{onClick:function(){return e.handleClick("facial")}},"Facial Login"),r.a.createElement("button",{onClick:function(){return e.handleClick("email")}},"Email Login"),this.state.message.length?r.a.createElement("div",null,this.state.message):null)}}]),t}(r.a.Component),I=a(17),x=a.n(I),A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={errorMessage:""},a.setRef=function(e){a.webcam=e},a.capture=function(){var e=window.location.href.split("/").reverse()[0],t=a.webcam.getScreenshot();f.a.post("/api/auth/faciallogin",{image:t,username:e}).then(function(e){var t=e.data.message;return t?a.setState({errorMessage:t}):a.props.setUser(e.data)}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x.a,{audio:!1,height:350,ref:this.setRef,screenshotFormat:"image/jpeg",width:350,videoConstraints:{width:1280,height:720,facingMode:"user"}}),r.a.createElement("button",{onClick:this.capture},"Capture photo"),this.state.errorMessage?r.a.createElement("div",null,this.state.errorMessage):null)}}]),t}(r.a.Component),N=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",message:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(j.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault(),console.log(a.props),f.a.post("/api/auth/emaillogin",{username:window.location.href.split("/").reverse()[0],password:a.state.password}).then(function(e){var t=e.data.message;if(t)return a.setState({message:t});a.props.setUser(e.data),a.props.history.push("/store")}).catch(function(e){console.log(e)})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Login",r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{type:"password",name:"password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Submit"),this.state.message?r.a.createElement("div",null,this.state.message):null),r.a.createElement("a",{href:"/auth/facebook"},r.a.createElement("button",null,"Sign in with Facebook")))}}]),t}(r.a.Component),P=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Signup"),r.a.createElement(p.b,{to:"/facialsignup"},"Sign up with a photo"),r.a.createElement("br",null),r.a.createElement(p.b,{to:"/localsignup"},"Sign up with a password"))}}]),t}(r.a.Component),L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={success:!1,url:""},a.handleChange=function(e){a.setState({success:!1,url:""})},a.handleUpload=function(e){if(!a.props.username.length)return a.props.errorMessage("Please fill in username");var t=a.uploadInput.files[0]||a.props.capturedImage,n=t.name.split("."),r=n[0],s=n[1];console.log("https://project3profileimages.s3.us-east-2.amazonaws.com/".concat(r)),f.a.post("/api/sign_s3",{fileName:r,fileType:s}).then(function(e){var n=e.data.data.returnData,o=n.signedRequest,c=n.url;a.setState({url:c}),console.log("Recieved a signed request "+o);var l={headers:{"Content-Type":s,"x-amz-acl":"public-read"}};console.log(t),f.a.put(o,t,l).then(function(e){a.setState({success:!0}),f.a.post("/api/auth/facialsignup",{username:a.props.username,profileImg:"https://project3profileimages.s3.us-east-2.amazonaws.com/".concat(r)}).then(function(e){e.data.message?a.props.redirect(!1):console.log(e.data),a.props.setUser(e.data),a.props.redirect(!0,e.data)})}).catch(function(e){console.log(e),alert("ERROR "+JSON.stringify(e))})}).catch(function(e){alert(JSON.stringify(e))})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("center",null,r.a.createElement("h1",null,"UPLOAD A FILE"),this.state.success?r.a.createElement("h3",null,"Success"):null,r.a.createElement("input",{onChange:this.handleChange,ref:function(t){e.uploadInput=t},type:"file"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.handleUpload},"UPLOAD")))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={image:"",username:"",errorMessage:"",uploadImg:""},a.handleChange=function(e){a.setState({username:e.target.value},function(){return console.log(a.state)})},a.errorMessage=function(e){a.setState({errorMessage:e})},a.redirect=function(e,t){e?(a.props.setUser(t),a.props.history.push("/")):a.setState({errorMessage:"This username is already taken"})},a.setRef=function(e){a.webcam=e},a.capture=function(){if(!a.state.username.length)return a.setState({errorMessage:"Please enter a username"});var e=a.webcam.getScreenshot(),t=e.replace(/^data:image\/\w+;base64,/,""),n=a.state.username;fetch(e).then(function(e){return e.blob()}).then(function(e){var t=new FormData;e.lastModifiedDate=new Date,e.name="".concat(n,"-profile-image"),t.append("image",e,"name"),console.log(e),a.setState({uploadImg:e}),console.log(a.state)}),a.setState({image:e,uploadImg:t},function(){return console.log(a.state)})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Username: "),r.a.createElement("input",{type:"text",name:"username",onChange:this.handleChange}),this.state.image.length?r.a.createElement("img",{src:this.state.image,width:"350px",alt:"profile"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{audio:!1,height:350,ref:this.setRef,screenshotFormat:"image/jpeg",width:350,videoConstraints:{width:1280,height:720,facingMode:"user"}}),r.a.createElement("button",{onClick:this.capture},"Capture photo")),r.a.createElement("h1",null,"OR"),r.a.createElement(L,{username:this.state.username,capturedImage:this.state.uploadImg,errorMessage:this.errorMessage,redirect:this.redirect,setUser:this.props.setUser}),this.state.errorMessage.length?r.a.createElement("div",null,this.state.errorMessage):null)}}]),t}(r.a.Component),D=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",message:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(j.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault(),f.a.post("/api/auth/localsignup",{username:a.state.username,password:a.state.password}).then(function(e){console.log(e.data);var t=e.data.message;if(t)return a.setState({message:t});a.props.setUser(e.data),a.props.history.push("/")}).catch(function(e){console.log(e)})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Signup",r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"username"},"Username: "),r.a.createElement("input",{type:"text",name:"username",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{type:"password",name:"password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Submit"),this.state.message?r.a.createElement("div",null,this.state.message):null))}}]),t}(r.a.Component),R=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user},a.setUser=function(e){console.log(e),a.setState({user:e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d,{setUser:this.setUser,user:this.state.user}),r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:b,user:this.state.user}),r.a.createElement(v,{exact:!0,path:"/user",redirectPath:"/login",user:this.state.user,component:O}),r.a.createElement(v,{exact:!0,path:"/store",redirectPath:"/login",setUser:this.setUser,user:this.state.user,component:S}),r.a.createElement(v,{exact:!0,path:"/wishlist",redirectPath:"/login",setUser:this.setUser,user:this.state.user,component:U}),r.a.createElement(v,{exact:!0,path:"/login",redirectPath:"/user",setUser:this.setUser,user:!this.state.user,component:M}),r.a.createElement(v,{exact:!0,path:"/faciallogin/:id",component:A,setUser:this.setUser,user:!this.state.user}),r.a.createElement(v,{exact:!0,path:"/emaillogin/:id",component:N,setUser:this.setUser,user:!this.state.user}),r.a.createElement(v,{exact:!0,path:"/signup",redirectPath:"/user",setUser:this.setUser,user:!this.state.user,component:P}),r.a.createElement(v,{exact:!0,path:"/localsignup",component:D,setUser:this.setUser,user:!this.state.user}),r.a.createElement(v,{exact:!0,path:"/facialsignup",component:F,setUser:this.setUser,user:!this.state.user}),r.a.createElement(v,{exact:!0,path:"/logout",component:b})))}}]),t}(r.a.Component);f.a.get("/api/auth/loggedin").then(function(e){o.a.render(r.a.createElement(p.a,null,r.a.createElement(R,{user:e.data})),document.getElementById("root"))}).catch(function(e){console.log(e)})}},[[30,1,2]]]);
//# sourceMappingURL=main.1bfa3134.chunk.js.map